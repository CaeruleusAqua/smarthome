============================
Release 1.9.x - tt. mmm 2022
============================

Es gibt eine Menge neuer Features im Core von SmartHomeNG und den Plugins.

.. note::

    Diese Release Notes sind ein Arbeitsstand.

     - Berücksichtigt sind Commits im smarthome Repository bis incl. 23. April 2022
       (Documentation: Removed link from old release notes to README.md of ...)
     - Berücksichtigt sind Commits im plugins Repository bis incl. 16. Februar 2022
       (...)


Überblick
=========

Dieses ist neues Release für SmartHomeNG. Die Änderungen gegenüber dem Release v1.9.1 sind im
folgenden in diesen Release Notes beschrieben.


Minimum Python Version
----------------------

Die absolute Minimum Python Version in der SmartHomeNG startet, ist **Python 3.6**.

Für das SmartHomeNG Release 1.10 wird die absolute Minimum Python Version auf **Python 3.7** angehoben, da der
Community Support für Python 3.6 am 23. Dezember 2021 endete.

Bei einer Neuinstallation wird jedoch empfohlen auf einer der neueren Python Versionen (3.8 oder 3.9) aufzusetzen.


Unterstützte Python Versionen
-----------------------------

Die älteste offiziell unterstützte Python Version für SmartHomeNG Release 1.9.x ist **Python 3.7**.
(Siehe auch :ref:`Hard- u. Software Anforderungen <python_versionen>` im Abschnitt **Installation**
zu unterstützten Python Versionen)


Änderungen am Core
==================

Updates in the CORE
-------------------

* sample plugins:

  * fix webif example index.html for sample_plugin
  * update example plugin to reflect webif_pagelength attribute and new datatable options.

* Fix for creation of var/log directory on first start
* suggest 'python -m pip' in smarthome.yaml.default
* prevent multiple logic triggers on same logic
* sunevent offset in minutes used now for start of event calculation
* tests: remove python3.6 from testing
* tests: added python 3.9 and 3.10

* Items:

  *  Fix für item attribute prefix 'my_'

* Logics:

  * ...

* Libs:

  * lib.item:

    * Extended _cast_duration to cast float values too

  * lib.log:

    * Added loglevels DBGHIGH, DBGMED and DBGLOW

  * lib.metadata:

    * Fix for dicts in attributes

  * lib.network:

    * Autoreconnect modified
    * Adjust logging
    * Prepare connections monitoring

  * lib.shtime:

    *  Implemented handling for breaking change in pypi package 'holidays' v0.13

* Modules:

  * admin:

    * Fixed display of logs in shngadmin for changed file naming convention introduced in shng v1.9
    * Sorting of list of logics is now case insensitive
    * bumped shngadmin version to 0.5.4

  * http:

    * fix datatables live update for multiple datatables
    * update example plugin to reflect webif_pagelength attribute and new datatable options
    * update datatables to 1.11.5 and FixedHeader plugin to 3.2.2
    * include pageResize plugin for automatically adjusting datatable height to browser window height
    * implement CSS IDs for web interface top (plugin name, version, state, etc.)
    * Update datatables defaults to be prepared for automatic height (pageResize, default is still false). Automatically scroll to top on page change
    * adjusted shngInsertText function to include highlight effect on value change. Make sure value updates only happen if cell is visible on current page
    * datatables: introduce table-resize class and add some adjustments to make pageResize based on window height possible for multiple bodytabs
    * datatables: automatically add display:none and table-layout:fixed to all datatables as well as add the class display automatically
    * datatables: update docu. Remove "table-responsive" div, add table-resize to div
    * fix smarthomeng.js shngInsertText (important!)
    * datatables: fix to work with Safari, tweaks for newly created rows

  * websocket:

    * Updated logging
    * Active cancellation of update_all_series, when smarthomeng leaves running-mode

* Plugins:

  * ...

* tests:

  * ...


Änderungen bei Plugins
======================

New Plugins
-----------

For details of the changes of the individual plugins, please refer to the documentation of the respective plugin.

* zigbee2mqtt: Plugin to control devices which are linked to Zigbee Gateway equipped with Zigbee2MQTT firmware.
  Communication is handled through the MQTT module of SmartHomeNG.



Plugin Updates
--------------

* avm:

  * Fixed update error for aha_devices introduced with commit 1a28170. Added support for Fritz Dect 500 RGB LED bulb
  * Added deprecated warning for avm_data_types that are used via the old interface and should be reconfigured to use the new AHA interface.

* neato:

  * Reduced error "robot picked up" from error to warning


Outdated Plugins
----------------

The following plugins were already marked in version v1.6 as *deprecated*. This means that the plugins
are still working, but are not developed further anymore and are removed from the release of SmartHomeNG
in the next release. User of these plugins should switch to corresponding succeeding plugins.

* System Plugins

  * backend - use the administration interface instead
  * sqlite_visu2_8 - switch to the **database** plugin

* Web Plugins

  * wunderground - the free API is not provided anymore by Wunderground


The following plugins are marked as *deprecated* with SmartHomeNG v1.7, because neither user nor tester have been found:

* Gateway Plugins

  * ecmd
  * elro
  * iaqstick
  * snom
  * tellstick

* Interface Plugins

  * easymeter
  * smawb
  * vr100

* Web Plugins

  * nma

Moreover, the previous mqtt plugin was renamed to mqtt1 and marked as *deprecated*, because the new mqtt
plugin takes over the functionality. This plugin is based on the mqtt module and the recent core.


Retired Plugins
---------------

The following plugins have been retired. They had been deprecated in one of the preceding releases of SmartHomeNG.
They have been removed from the plugins repository, but they can still be found on github. Now they reside in
the **plugin_archive** repository from where they can be downloaded if they are still needed.

* ...


Weitere Änderungen
==================

Tools
-----

* ...


Documentation
-------------

* update requirements for sphinx and myst to more recent versions
* Added info about max Python version to plugin documentation


